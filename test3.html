<!DOCTYPE html>
<html>
    <head>
    <meta name="viewport" content="width=device-width">

    <script>
        /** Apply theme inline in head to avoid flash of unstyled content. */
        const matchMediaDark = window.matchMedia('(prefers-color-scheme: light)')
        const htmlClassList = document.querySelector('html').classList

        // Set the 'dark' class according to localStorage 'theme' setting.
        // Else if there's no stored 'theme', set the class per the system.
        function updateTheme() {
        localStorage.theme === 'light' || (!('theme' in localStorage) && matchMediaDark.matches)
            ? htmlClassList.add('light')
            : htmlClassList.remove('light')
        }

        // Apply theme when page loads.
        updateTheme()

        // Update 'dark' class when system theme is changed.
        matchMediaDark.addEventListener('change', updateTheme)

        // Toggle localStorage theme between 'dark' and 'light' then update the theme.
        function toggleTheme() {
            htmlClassList.contains('light')
            ? localStorage.theme = 'dark'
            : localStorage.theme = 'light'

            updateTheme()
        }

        // Fix bfcache issue on mobile
    window.addEventListener('pageshow', updateTheme);
    </script>

    <style>
    :root {
        --primary-color: floralwhite;
        --background-color: #111;
        --accent-color: lightblue;
        --form-field-color: #111;
        --form-field-background-color: floralwhite;
    }

    .light {
        --primary-color: #111;
        --background-color: floralwhite;
        --accent-color: mediumblue;
        --form-field-background-color: white;
    }

    body {
        font-family: sans-serif;
        background-color: var(--background-color);
        color: var(--primary-color);

    }

    button {
            background-color: transparent;
            color: var(--primary-color);
            border-radius: 6px;
            padding:8px;
            cursor: pointer;
            outline: none;
            border: 1px solid;
        }

    a {
        color: var(--accent-color);
    }

    .light button {
            color: var(--primary-color);
    }

    .light a {
        color: var(--accent-color);
    }

    .toggle-thingy {
        height: 22px;
        width: 22px;
    }

    

.sun {
    display: block !important;
}

.moon {
    display: none !important;
}

html.dark .sun {
    display: none !important;
}

html.dark .moon {
    display: block !important;
}

    </style>
    </head>
    <body>
        <div id="acme-all-purpose-theme-toggle-wrapper">
            <button onclick="toggleTheme()">
                <svg class="inline-graphic toggle-thingy sun" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 256 256">
                    <path fill="none" d="M0 0h256v256H0z"/>
                    <path fill="none" stroke="var(--primary-color)" stroke-linecap="round" stroke-linejoin="round" stroke-width="20" d="M128 40V16"/>
                    <circle cx="128" cy="128" r="56" fill="none" stroke="var(--primary-color)" stroke-linecap="round" stroke-linejoin="round" stroke-width="20"/>
                    <path fill="none" stroke="var(--primary-color)" stroke-linecap="round" stroke-linejoin="round" stroke-width="20" d="M64 64 48 48m16 144-16 16M192 64l16-16m-16 144 16 16M40 128H16m112 88v24m88-112h24"/>
                </svg>
                <svg class="inline-graphic toggle-thingy moon" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 256 256">
                    <path fill="none" d="M0 0h256v256H0z"/>
                    <path d="M108.11 28.11a96.09 96.09 0 0 0 119.78 119.78A96 96 0 1 1 108.11 28.11" fill="none" stroke="var(--primary-color)" stroke-linecap="round" stroke-linejoin="round" stroke-width="20"/>
                </svg>
            </button>
        </div>
        <h1>Dark Mode Switcher Demo</h1>
        <p>
            Click the button above to switch themes!<br>
            All this really does is add or remove the 'dark' class from the parent.
            HTML element.
        </p>
        <a href="/test.html">Let's see if this works with bf cache</a>
    <body>
</html>